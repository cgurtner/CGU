RewriteEngine on

Header set Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" env=HTTPS

RewriteRule ^gui/.* - [L]
RewriteRule ^file/.* - [L]
RewriteRule ^vendor/.* - [L]

RewriteRule ^sitemap.xml$ sitemap.php [L]
RewriteRule ^sitemap.php$ - [L]

RewriteCond %{HTTPS} !=on  [OR]
RewriteCond %{HTTP_HOST} !^cgurtner\.ch$ [NC]
RewriteRule ^ https://cgurtner.ch%{REQUEST_URI} [R=301,L]

RewriteRule (.*) index.php?page=$1&%{QUERY_STRING} [L]